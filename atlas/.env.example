# AtlasML Production Configuration
# Copy this file to .env and configure with your actual values
# WARNING: Never commit .env to version control!

# ====================================
# AtlasML Domain Configuration
# ====================================
# Domain for AtlasML (e.g., atlasml.example.com)
# This must be a valid domain pointing to your server's public IP
ATLASML_DOMAIN=atlasml.example.com

# Docker image tag to deploy (e.g., latest, v1.0.0, main)
IMAGE_TAG=latest

# ====================================
# Let's Encrypt Configuration
# ====================================
# Email address for Let's Encrypt certificate notifications and renewal reminders
# This email will receive important notifications about certificate expiry
LETSENCRYPT_EMAIL=your-email@example.com

# ====================================
# Weaviate Connection (Centralized Instance)
# ====================================
# IMPORTANT: AtlasML requires the centralized Weaviate setup
# See: https://github.com/ls1intum/edutelligence/blob/main/weaviate/README.md

# Full HTTPS URL of the centralized Weaviate instance
WEAVIATE_HOST=https://weaviate.example.com

# Weaviate HTTPS port (always 443 for centralized setup)
WEAVIATE_PORT=443

# Weaviate API key (must match the key configured in centralized Weaviate)
# Generate a secure API key using: openssl rand -base64 32
# This should be the SAME key used in your centralized Weaviate instance
WEAVIATE_API_KEY=your-weaviate-api-key-here

# ====================================
# Azure OpenAI Configuration
# ====================================
# Azure OpenAI API key for generating embeddings
OPENAI_API_KEY=your-azure-openai-api-key

# Azure OpenAI endpoint URL
OPENAI_API_URL=https://your-instance.openai.azure.com

# ====================================
# AtlasML Authentication
# ====================================
# API keys for AtlasML endpoints (comma-separated format)
# Generate secure keys using: openssl rand -base64 32
# Format: key1,key2,key3
# These keys will be used by Artemis to authenticate with AtlasML
ATLAS_API_KEYS=your-secure-api-key-here

# ====================================
# Optional: Sentry Error Tracking
# ====================================
# Sentry DSN for error tracking (leave empty to disable)
# Only used when ENV=production
SENTRY_DSN=

# ====================================
# Environment Configuration
# ====================================
# Environment name (development, staging, production)
# Affects logging, Sentry integration, and default behaviors
ENV=production

# Python path (default: /atlasml - do not change unless necessary)
PYTHONPATH=/atlasml

# ====================================
# IP Whitelisting (Optional)
# ====================================
# Comma-separated list of allowed IP ranges for accessing AtlasML
# Default: empty (no IP restrictions - only API key authentication required)
# When set, only the specified IPs can access AtlasML (in addition to API key auth)
#
# Examples:
#   Single IP: ALLOWED_IPS=203.0.113.1/32
#   Multiple IPs: ALLOWED_IPS=10.0.0.0/8,192.168.0.0/16,172.16.0.0/12
#   Private networks: ALLOWED_IPS=10.0.0.0/8,192.168.0.0/16,172.16.0.0/12
#
ALLOWED_IPS=

# ====================================
# Resource Limits (adjust based on your hardware)
# ====================================
# Traefik Resource Limits
TRAEFIK_CPU_LIMIT=0.5
TRAEFIK_MEMORY_LIMIT=512M
TRAEFIK_CPU_RESERVATION=0.25
TRAEFIK_MEMORY_RESERVATION=256M

# AtlasML Resource Limits
# Defaults are for production workloads
# Small server (8GB RAM): 2 CPUs, 4GB limit / 1 CPU, 2GB reservation
# Medium server (16GB RAM): 4 CPUs, 8GB limit / 2 CPUs, 4GB reservation (default)
# Large server (32GB+ RAM): 8 CPUs, 16GB limit / 4 CPUs, 8GB reservation
ATLASML_CPU_LIMIT=4
ATLASML_MEMORY_LIMIT=8G
ATLASML_CPU_RESERVATION=2
ATLASML_MEMORY_RESERVATION=4G
