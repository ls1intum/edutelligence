In the paragraphs below you are provided with an answer to a question. Underneath the answer, you will find two sets of source paragraphs:

1. Lecture Slides: Contains Lecture Unit ID and Page number plus the content.
2. Lecture Transcriptions: Contains Lecture Unit ID, optional Page number, start and end times in seconds plus the content.

Your task:

- Step 0: Output something in JSON format. Follow the prompt to know how exactly.
- Step 1: Read the answer and identify sentences that use information from either source.
- Step 2: After each sentence that contains used information, add a citation marker in square brackets using the format [cite:n]. If a sentence uses information from more than one source, include each relevant citation marker. Use consecutive marker indices starting at n=1. Do NOT skip numbers.
- Step 3: When assigning citation markers, if the same source (i.e., identical citation details) is referenced in multiple sentences, ALWAYS use the same citation marker (e.g., [cite:1]) instead of assigning a new marker each time.
- Step 4: Collect all unique sources used and represent them ONLY in the "citations" array of the JSON output. Represent every citation once. Every citation marker [cite:n] that appears in answer_with_markers MUST have exactly one corresponding object in the citations array with index == n. Do NOT include citation objects that are not referenced by a marker.
- Step 5: Only include citations for paragraphs that are actually relevant to the answer. If no provided paragraphs were used, output an empty list in the citations section of the JSON output.
- Step 6: Always include citations if the answer contains any information from the provided paragraphs.
- Step 7: If both lecture transcription and lecture slide sources are found to be relevant, include citations for both types of sources.
- Step 8: For each citation, include the exact source paragraph text you used from the Paragraphs or TranscriptionParagraphs below.
- Step 9: Set "paragraph_type" to "slide" for Paragraphs or "transcription" for TranscriptionParagraphs.
- Step 10: Ensure that your final response is in the JSON format.

Output Format (JSON schema - MUST follow exactly):

{{
  "answer_with_markers": "<string>",
  "citations": [
    {{
      "index": <int>,
      "type": "L",
      "entityid": <int>,
      "page": <int|null>,
      "start": <int|null>,
      "end": <int|null>,
      "paragraph_type": "slide"|"transcription",
      "paragraph": "<string>"
    }}
  ]
}}

Citation Formats:

1. For everything taken from the TranscriptionParagraphs section (Lecture Transcriptions):
   - Always include Lecture Unit ID as entityid, Start Time in seconds, End Time in seconds.
   - Include Page only if available in the source.
   - If a field is not present in the source, set it to null .
   - For the index use the corresponding number n from the citation marker [cite:n] in the text.
   - Format:
    {{
      "index": n,
      "type": "L",
      "entityid": <int>,
      "page": <int|null>,
      "start": <int>,
      "end": <int>,
      "paragraph_type": "transcription",
      "paragraph": "<string>"
    }}

2. For everything taken from the Paragraphs section (Lecture Slides):
   - Always include Lecture Unit ID as entityid, Page.
   - Do NOT include Start/End.
   - If a field is not present in the source, set it to null.
   - For the index use the corresponding number n from the citation marker [cite:n] in the text.
   - Format:
    {{
      "index": n,
      "type": "L",
      "entityid": <int>,
      "page": <int>,
      "start": null,
      "end": null,
      "paragraph_type": "slide",
      "paragraph": "<string>"
    }}

Example:

{{
  "answer_with_markers": "Lorem ipsum dolor sit amet, consectetur adipiscing elit [cite:1]. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua [cite:1][cite:2].",
  "citations": [
    {{
      "index": 1,
      "type": "L",
      "entityid": 1234,
      "page": 6,
      "start": 12,
      "end": 15,
      "paragraph_type": "transcription",
      "paragraph": "Lorem ipsum transcription text."
    }},
    {{
      "index": 2,
      "type": "L",
      "entityid": 5678,
      "page": 6,
      "start": null,
      "end": null,
      "paragraph_type": "slide",
      "paragraph": "Lorem ipsum slide text."
    }}
  ]
}}

Input:

- Answer without citations:
  {Answer}

- Paragraphs for citing slides (with their Lecture Unit ID and Page numbers for lecture slides):
  {Paragraphs}

- TranscriptionParagraphs for citing transcriptions/videos (with their Lecture Unit ID, Page numbers, and start/end times in seconds for lecture transcriptions):
  {TranscriptionParagraphs}

Important:
- If the answer does not contain any information from the provided paragraphs or if there are no paragraphs, output the unchanged answer in the JSON without any citations.
- Only output the correct JSON and nothing else.
